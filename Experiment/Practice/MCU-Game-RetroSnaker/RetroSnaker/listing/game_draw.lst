C51 COMPILER V9.01   GAME_DRAW                                                             10/17/2024 23:15:08 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE GAME_DRAW
OBJECT MODULE PLACED IN .\object\game_draw.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE device\game_draw.c BROWSE INCDIR(.\device) DEBUG OBJECTEXTEND PRINT(.\li
                    -sting\game_draw.lst) OBJECT(.\object\game_draw.obj)

line level    source

   1          #include "game_draw.h"
   2          
   3          void snake_init(Snake *snake)
   4          {
   5   1          snake->dir = UP;
   6   1          snake->speed = 1;
   7   1          snake->length = 2;
   8   1          snake->snake_pos[0][0] = 2;
   9   1          snake->snake_pos[0][1] = 6;
  10   1          snake->snake_pos[1][0] = 1;
  11   1          snake->snake_pos[1][1] = 6;
  12   1      }
  13          
  14          void snake_pos_change(Snake *snake, uint16_t r, uint16_t c)
  15          {
  16   1          uint16_t i;
  17   1          for (i = 0; i < snake->length - 1; i++)
  18   1          {
  19   2              snake->snake_pos[i + 1][0] = snake->snake_pos[i][0];
  20   2              snake->snake_pos[i + 1][1] = snake->snake_pos[i][1];
  21   2          }
  22   1          if (r < 0)
  23   1          {
  24   2              snake->snake_pos[0][0] = snake->snake_pos[0][0] == 0 ? 7 : snake->snake_pos[0][0] - 1;
  25   2          }
  26   1          else
  27   1          {
  28   2              snake->snake_pos[0][0] = (snake->snake_pos[0][0] + r) % 8;
  29   2          }
  30   1          if (c < 0)
  31   1          {
  32   2              snake->snake_pos[0][1] = snake->snake_pos[0][1] == 0 ? 7 : snake->snake_pos[0][1] - 1;
  33   2          }
  34   1          else
  35   1          {
  36   2              snake->snake_pos[0][1] = (snake->snake_pos[0][1] + c) % 8;
  37   2          }
  38   1      }
  39          
  40          void snake_move(Snake *snake)
  41          {
  42   1          switch (snake->dir)
  43   1          {
  44   2          case UP:
  45   2              snake_pos_change(snake, 1, 0);
  46   2              break;
  47   2          case DOWN:
  48   2              snake_pos_change(snake, -1, 0);
  49   2              break;
  50   2          case LEFT:
  51   2              snake_pos_change(snake, 0, 1);
  52   2              break;
  53   2          case RIGHT:
  54   2              snake_pos_change(snake, 0, -1);
C51 COMPILER V9.01   GAME_DRAW                                                             10/17/2024 23:15:08 PAGE 2   

  55   2              break;
  56   2          }
  57   1      }
  58          
  59          void show_snake(Snake snake)
  60          {
  61   1          uchar8_t i = 0;
  62   1          char8_t dat[2] = {0x00, 0x00};
  63   1          for (i = 0; i < snake.length; i++)
  64   1          {
  65   2              dat[0] |= (1 << snake.snake_pos[i][0]);
  66   2              dat[1] |= (1 << snake.snake_pos[i][1]);
  67   2          }
  68   1          dat[1] = ~dat[1];
  69   1          led_maxtir_dispaly(dat);
  70   1      }
  71          
  72          void snake_change_dir(Snake *snake, uchar8_t k)
  73          {
  74   1          switch (k)
  75   1          {
  76   2          case 2:
  77   2              if (snake->dir != DOWN)
  78   2              {
  79   3                  snake->dir = UP;
  80   3              }
  81   2              break;
  82   2          case 10:
  83   2              if (snake->dir != UP)
  84   2              {
  85   3                  snake->dir = DOWN;
  86   3              }
  87   2              break;
  88   2          case 5:
  89   2              if (snake->dir != RIGHT)
  90   2              {
  91   3                  snake->dir = LEFT;
  92   3              }
  93   2              break;
  94   2          case 7:
  95   2              if (snake->dir != LEFT)
  96   2              {
  97   3                  snake->dir = RIGHT;
  98   3              }
  99   2              break;
 100   2          }
 101   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    499    ----
   CONSTANT SIZE    =      2    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      49
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
