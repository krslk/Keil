C51 COMPILER V9.01   MAIN                                                                  10/16/2024 23:41:43 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\object\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE user\main.c BROWSE DEBUG OBJECTEXTEND PRINT(.\listing\main.lst) OBJECT(.
                    -\object\main.obj)

line level    source

   1          #include "REG52.H"
   2          
   3          typedef unsigned char uchar8_t;
   4          typedef unsigned int uint16_t;
   5          
   6          sbit SRCLK = P3 ^ 6; // 移位寄存器时钟输入
   7          // sbit RCLK = P3 ^ 5;  // 存储寄存器时钟输入
   8          sbit SER = P3 ^ 4;   // 串行数据输入
   9          uchar8_t ghc595_buf[8] = {0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80};
  10          
  11          void delay_10us(uint16_t s);
  12          void hc595_write_data(uchar8_t dat)
  13          {
  14   1          uchar8_t i = 0;
  15   1          for (i = 0; i < 8; i++)
  16   1          {
  17   2              SER = dat >> 7;
  18   2              dat <<= 1;
  19   2              SRCLK = 0;
  20   2              delay_10us(1);
  21   2              SRCLK = 1;
  22   2              delay_10us(1);
  23   2          }
  24   1          RCLK = 1;
  25   1          delay_10us(1);
  26   1          RCLK = 0;
  27   1      }
  28          
  29          uint16_t i = 0;
  30          
  31          void main()
  32          {
  33   1          P0 = 0x80;
  34   1          while (1)
  35   1          {
  36   2              for (i = 0; i < 8; i++)
  37   2              {
  38   3                  hc595_write_data(0x00); // 消除前面寄存器缓存数据
  39   3                  hc595_write_data(ghc595_buf[i]); // 写入新的数据
  40   3                  delay_10us(50000); // 延时500ms
  41   3              }
  42   2          }
  43   1      }
  44          
  45          /**
  46           * *******************************************************************************************************
             -*******
  47           */
  48          
  49          void delay_10us(uint16_t s) //@11.0592MHz
  50          {
  51   1          uint16_t i = 2 * s;
  52   1          while (--i)
  53   1              ;
C51 COMPILER V9.01   MAIN                                                                  10/16/2024 23:41:43 PAGE 2   

  54   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    122    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
