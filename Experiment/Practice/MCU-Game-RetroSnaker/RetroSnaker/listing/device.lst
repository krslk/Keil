C51 COMPILER V9.01   DEVICE                                                                10/17/2024 16:44:37 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE DEVICE
OBJECT MODULE PLACED IN .\object\device.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE device\device.c BROWSE INCDIR(.\device) DEBUG OBJECTEXTEND PRINT(.\listi
                    -ng\device.lst) OBJECT(.\object\device.obj)

line level    source

   1          #include "device.h"
   2          
   3          void hc595_write_data(uchar8_t dat)
   4          {
   5   1          uchar8_t i = 0;
   6   1          for (i = 0; i < 8; i++)
   7   1          {
   8   2              SER = dat >> 7;
   9   2              dat <<= 1;
  10   2              SRCLK = 0;
  11   2              delay_10us(1);
  12   2              SRCLK = 1;
  13   2              delay_10us(1);
  14   2          }
  15   1          RCLK = 1;
  16   1          delay_10us(1);
  17   1          RCLK = 0;
  18   1      }
  19          
  20          void led_maxtir_dispaly(char8_t dat[])
  21          {
  22   1          hc595_write_data(dat[0]);
  23   1          LED_MAXTIR_CONTROL_PORT = dat[1];
  24   1      }
  25          
  26          void delay_10us(uint16_t s) //@11.0592MHz
  27          {
  28   1          uint16_t i = 2 * s;
  29   1          while (--i)
  30   1              ;
  31   1      }
  32          
  33          uchar8_t maxtir_flip_scan(void)
  34          {
  35   1          static uchar8_t key_value = 0;
  36   1          KEY_MATRIX_PORT = 0x0f;
  37   1          if (KEY_MATRIX_PORT != 0x0f)
  38   1          {
  39   2              delay_10us(1000);
  40   2              if (KEY_MATRIX_PORT != 0x0f)
  41   2              {
  42   3                  KEY_MATRIX_PORT = 0x0f;
  43   3                  switch (KEY_MATRIX_PORT)
  44   3                  {
  45   4                  case 0x07:
  46   4                      key_value = 1;
  47   4                      break;
  48   4                  case 0x0b:
  49   4                      key_value = 2;
  50   4                      break;
  51   4                  case 0x0d:
  52   4                      key_value = 3;
  53   4                      break;
  54   4                  case 0x0e:
C51 COMPILER V9.01   DEVICE                                                                10/17/2024 16:44:37 PAGE 2   

  55   4                      key_value = 4;
  56   4                      break;
  57   4                  }
  58   3              }
  59   2              KEY_MATRIX_PORT = 0xf0;
  60   2              switch (KEY_MATRIX_PORT)
  61   2              {
  62   3              case 0x70:
  63   3                  key_value = key_value;
  64   3                  break;
  65   3              case 0xb0:
  66   3                  key_value += 4;
  67   3                  break;
  68   3              case 0xd0:
  69   3                  key_value += 8;
  70   3                  break;
  71   3              case 0xe0:
  72   3                  key_value += 12;
  73   3                  break;
  74   3              }
  75   2              while (KEY_MATRIX_PORT != 0xf0)
  76   2                  ;
  77   2          }
  78   1          else
  79   1          {
  80   2              key_value = 0;
  81   2          }
  82   1          return key_value;
  83   1      }
  84          
  85          void time0_init(void)
  86          {
  87   1          TMOD |= 0x01;
  88   1          TH0 = 0xFC;
  89   1          TL0 = 0x18;
  90   1          ET0 = 1;
  91   1          EA = 1;
  92   1          TR0 = 1;
  93   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    233    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
